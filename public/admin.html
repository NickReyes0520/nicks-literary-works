<!-- Admin Dashboard -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Book Editor</title>
  <link rel="stylesheet" href="admin.css" />
  <!-- Include libraries for WYSIWYG, PDF editing, and more -->
  <link href="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.snow.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
</head>
<body>
  <header class="admin-header">
    <h1>ğŸ“š Admin Book Editor Portal</h1>
    <p class="subheading">Manage and Create Your Books Right Here</p>
  </header>

  <nav class="admin-nav">
    <button onclick="showPanel('editor')">âœï¸ Book Editor</button>
    <button onclick="showPanel('cover')">ğŸ¨ Cover Designer</button>
    <button onclick="showPanel('layout')">ğŸ§¾ Layout & Structure</button>
    <button onclick="showPanel('images')">ğŸ–¼ï¸ Image Insertion</button>
    <button onclick="showPanel('pdf')">ğŸ“„ PDF Editor</button>
  </nav>

  <main class="admin-main">
    <!-- WYSIWYG Editor -->
    <section id="editor" class="admin-panel">
      <h2>âœï¸ Write and Format Your Book</h2>
      <div id="quillEditor"></div>
      <button onclick="saveTextAsFile()">ğŸ’¾ Save as HTML</button>
    </section>

    <!-- Cover Designer Placeholder -->
    <section id="cover" class="admin-panel hidden">
      <h2>ğŸ¨ Design Your Book Cover</h2>
      <p>[Canvas-based editor placeholder â€“ to be integrated with fabric.js or similar]</p>
    </section>

    <!-- Book Structure Management -->
    <section id="layout" class="admin-panel hidden">
      <h2>ğŸ§¾ Organize Parts & Chapters</h2>
      <button onclick="addChapter()">â• Add Chapter</button>
      <ul id="chapterList"></ul>
    </section>

    <!-- Image Insertion -->
    <section id="images" class="admin-panel hidden">
      <h2>ğŸ–¼ï¸ Insert Images</h2>
      <input type="file" id="imageUpload" accept="image/*" />
      <div id="imagePreview"></div>
    </section>

    <!-- PDF Editor -->
    <section id="pdf" class="admin-panel hidden">
      <h2>ğŸ“„ PDF Editor</h2>
      <input type="file" id="pdfUpload" accept="application/pdf" />
      <div id="pdfControls"></div>
      <canvas id="pdfCanvas"></canvas>
    </section>
  </main>

  <script>
    // Tab Switching
    function showPanel(panelId) {
      document.querySelectorAll('.admin-panel').forEach(p => p.classList.add('hidden'));
      document.getElementById(panelId).classList.remove('hidden');
    }

    // Quill Editor
    const quill = new Quill('#quillEditor', {
      theme: 'snow'
    });

    function saveTextAsFile() {
      const blob = new Blob([quill.root.innerHTML], { type: 'text/html;charset=utf-8' });
      saveAs(blob, 'my-book.html');
    }

    // Chapter management
    function addChapter() {
      const ul = document.getElementById('chapterList');
      const li = document.createElement('li');
      li.textContent = `Chapter ${ul.children.length + 1}`;
      ul.appendChild(li);
    }

    // Image upload preview
    document.getElementById('imageUpload').addEventListener('change', e => {
      const file = e.target.files[0];
      const reader = new FileReader();
      reader.onload = function(event) {
        const img = document.createElement('img');
        img.src = event.target.result;
        img.style.maxWidth = '300px';
        document.getElementById('imagePreview').appendChild(img);
      };
      reader.readAsDataURL(file);
    });
  </script>
</body>
</html>
